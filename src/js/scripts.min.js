var InputMask=function(a){a&&a.masked&&(a.masked=typeof a.masked===string?document.querySelectorAll(a.masked):a.masked),a?this.opts={masked:a.masked||document.querySelectorAll(this.d.masked),mNum:a.mNum||this.d.mNum,mChar:a.mChar||this.d.mChar,error:a.onError||this.d.onError}:(this.opts=this.d,this.opts.masked=document.querySelectorAll(this.opts.masked)),this.refresh(!0)},inputMask={d:{masked:".masked",mNum:"XdDmMyY9",mChar:"_",onError:function(){}},refresh:function(a){var b,c;for(a||(this.opts.masked=document.querySelectorAll(this.opts.masked)),i=0;i<this.opts.masked.length;i++)b=this.opts.masked[i],c=b.parentNode.getAttribute("class"),(!c||c&&c.indexOf("shell")===-1)&&(this.createShell(b),this.activateMasking(b))},createShell:function(a){var b=document.createElement("span"),c=document.createElement("span"),d=document.createElement("i"),e=a.getAttribute("class"),f=a.getAttribute("placeholder"),g=document.createTextNode(f);a.setAttribute("maxlength",g.length),a.setAttribute("data-placeholder",f),a.removeAttribute("placeholder"),(!e||e&&e.indexOf("masked")===-1)&&a.setAttribute("class",e+" masked"),c.setAttribute("aria-hidden","true"),c.setAttribute("id",a.getAttribute("id")+"Mask"),c.appendChild(d),c.appendChild(g),b.setAttribute("class","shell"),b.appendChild(c),a.parentNode.insertBefore(b,a),b.appendChild(a)},setValueOfMask:function(a){var b=a.target.value,c=a.target.getAttribute("data-placeholder");return"<i>"+b+"</i>"+c.substr(b.length)},activateMasking:function(a){var b=this;a.addEventListener?a.addEventListener("keyup",function(a){b.handleValueChange.call(b,a)},!1):a.attachEvent&&a.attachEvent("onkeyup",function(a){a.target=a.srcElement,b.handleValueChange.call(b,a)})},handleValueChange:function(a){var b=a.target.getAttribute("id");a.target.value!=document.querySelector("#"+b+"Mask i").innerHTML&&(document.getElementById(b).value=this.handleCurrentValue(a),document.getElementById(b+"Mask").innerHTML=this.setValueOfMask(a))},handleCurrentValue:function(a){var g,h,i,j,k,b=a.target.getAttribute("data-charset"),c=b||a.target.getAttribute("data-placeholder"),d=a.target.value,e=c.length,f="";for(k=b?d.replace(/\W/g,""):d.replace(/\D/g,""),g=0,h=0;g<e;g++){if(i=!isNaN(parseInt(k[h])),j=!!k[h]&&k[h].match(/[A-Z]/i),matchesNumber=this.opts.mNum.indexOf(c[g])>=0,matchesLetter=this.opts.mChar.indexOf(c[g])>=0,matchesNumber&&i||b&&matchesLetter&&j)f+=k[h++];else{if(!b&&!i&&matchesNumber||b&&(matchesLetter&&!j||matchesNumber&&!i))return f;f+=c[g]}if(void 0==k[h])break}return a.target.getAttribute("data-valid-example")?this.validateProgress(a,f):f},validateProgress:function(a,b){var c=a.target.getAttribute("data-valid-example"),d=new RegExp(a.target.getAttribute("pattern")),e=a.target.getAttribute("data-placeholder"),f=b.length,g="";if(1==f&&"MM"==e.toUpperCase().substr(0,2))return b>1&&b<10&&(b="0"+b),b;for(i=f;i>=0;i--){if(g=b+c.substr(b.length),d.test(g))return b;b=b.substr(0,b.length-1)}return b}};for(var property in inputMask)inputMask.hasOwnProperty(property)&&(InputMask.prototype[property]=inputMask[property]);!function(){var a=document.getElementsByTagName("script"),b=a[a.length-1];b.getAttribute("data-autoinit")&&new InputMask}();
/* Masked Input */

new InputMask();


/* Open Close modal */

var link = document.querySelector('.open-modal');
var modalId = link.getAttribute('href');
var popup = document.querySelector(modalId);
var overlay = document.querySelector('.modal__overlay');
var close = document.querySelector('.modal-close');

var form = popup.querySelector('form');
var submitBtn = popup.querySelector('.js-modal-submit');
var firstInput = popup.querySelector('input[name=name]');
var requiredFields = popup.querySelectorAll('[required]');

link.addEventListener('click', function(event) {
    event.preventDefault();
    overlay.classList.add('show');
    popup.classList.add('active');
    firstInput.focus();
});

close.addEventListener('click', function(event) {
  event.preventDefault();
  popup.classList.remove('active');
  overlay.classList.remove('show');
});

/* Close by Esc button */

window.addEventListener('keydown', function(event) {
  if (event.keyCode === 27) {
    if (popup.classList.contains('active')) {
      popup.classList.remove('active');
      overlay.classList.remove('show');
    }
  }
});

/* Card Input Tabbing */

var cardInputs = popup.querySelectorAll('.card__digit');

for (var i = 0; i < cardInputs.length; i++) {

  cardInputs[i].addEventListener('keydown', function(event) {

    var digitCount = event.target.value.length;
    var nextFieldId = event.target.dataset.next;
    var prevFieldId = event.target.dataset.prev;

    if (digitCount >= 4 && nextFieldId != '') {
      var nextInput = popup.querySelector('#' + nextFieldId);
      nextInput.focus();
    }

    if (digitCount == 0 && prevFieldId != '') {
      var prevInput = popup.querySelector('#' + prevFieldId);
      prevInput.focus();
    }

  });
}
//# sourceMappingURL=scripts.min.js.map
